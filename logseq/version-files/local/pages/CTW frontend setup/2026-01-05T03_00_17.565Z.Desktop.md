type:: [[Project]]
parent:: [[CTW]]

- query-sort-by:: block
  query-table:: true
  query-sort-desc:: true
  #+BEGIN_QUERY
  {:title "ğŸ—“ï¸ CTW ä»»åŠ¡è¿½è¸ª (å«çˆ¶çº§å¼•ç”¨ & æœªæ¥7å¤©)"
  :query [:find (pull ?b [*])
         :in $ ?start ?end
         :where
         ;; 1. åŒ¹é…ä»»åŠ¡çŠ¶æ€ (LATER, NOW, DONE)
         [?b :block/marker ?marker]
         [(contains? #{"LATER" "NOW" "DONE"} ?marker)]
         ;; 2. æ ¸å¿ƒé€»è¾‘ï¼šåŒ¹é…é¡µé¢åç§°åŠå…¶åˆ«å
         ;; æ³¨æ„ï¼šLogseq æ•°æ®åº“ä¸­ name å¿…é¡»å°å†™
         [?p :block/name ?pagename]
         [(contains? #{"ctw frontend setup"} ?pagename)]
         ;; 3. å…³é”®é­”æ³•ï¼špath-refs
         ;; åªè¦è¯¥ Block çš„è·¯å¾„ä¸Šï¼ˆåŒ…æ‹¬è‡ªèº«ã€çˆ¶çº§ã€çˆ¶çº§çš„çˆ¶çº§ï¼‰åŒ…å«è¯¥é¡µé¢ï¼Œå°±ç®—å‘½ä¸­
         [?b :block/path-refs ?p]
         ;; 4. æ—¶é—´èŒƒå›´é™åˆ¶ (åŸºäºæ—¥å¿—é¡µé¢)
         [?b :block/page ?j]
         [?j :block/journal? true]
         [?j :block/journal-day ?d]
         [(>= ?d ?start)]
         [(<= ?d ?end)]]
  :inputs [:-14d :+7d]
  :collapsed? false}
  #+END_QUERY